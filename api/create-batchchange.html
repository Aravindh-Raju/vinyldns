<!DOCTYPE html><html><head><title>VinylDNS: Create Batch Change</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="VinylDNS" /><meta name="description" content="DNS Governance" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="VinylDNS: Create Batch Change" /><meta name="title" property="og:title" content="VinylDNS: Create Batch Change" /><meta name="og:site_name" content="VinylDNS" /><meta name="og:url" content="http://vinyldns.io" /><meta name="og:type" content="website" /><meta name="og:description" content="DNS Governance" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="VinylDNS: Create Batch Change" /><meta name="twitter:image" content="/img/poster.png" /><meta name="twitter:description" content="DNS Governance" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:creator" content="@vinyldns" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/vs.css" /><link rel="stylesheet" href="/css/light-style.css" /><link rel="stylesheet" href="/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"></div><span>VinylDNS</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"><li><a href="/api/approve-batchchange.html" class="">Approve Batch Change</a></li><li><a href="/api/auth-mechanism.html" class="">Authentication</a></li><li><a href="/api/batchchange-errors.html" class="">Batch Change Errors</a></li><li><a href="/api/batchchange-model.html" class="">Batch Change Model</a></li><li><a href="/api/cancel-batchchange.html" class="">Cancel Batch Change</a></li><li><a href="/api/create-batchchange.html" class="active">Create Batch Change</a></li><li><a href="/api/create-group.html" class="">Create Group</a></li><li><a href="/api/create-recordset.html" class="">Create RecordSet</a></li><li><a href="/api/create-zone.html" class="">Create Zone</a></li><li><a href="/api/delete-group.html" class="">Delete Group</a></li><li><a href="/api/delete-recordset.html" class="">Delete RecordSet</a></li><li><a href="/api/delete-zone.html" class="">Delete Zone</a></li><li><a href="/api/get-batchchange.html" class="">Get Batch Change</a></li><li><a href="/api/get-group.html" class="">Get Group</a></li><li><a href="/api/get-recordset-change.html" class="">Get RecordSet Change</a></li><li><a href="/api/get-recordset.html" class="">Get RecordSet</a></li><li><a href="/api/get-zone-by-id.html" class="">Get Zone by ID</a></li><li><a href="/api/get-zone-by-name.html" class="">Get Zone by Name</a></li><li><a href="/api/" class="">API documentation</a></li><li><a href="/api/list-batchchanges.html" class="">List Batch Changes</a></li><li><a href="/api/list-group-activity.html" class="">List Group Activity</a></li><li><a href="/api/list-group-admins.html" class="">List Group Admins</a></li><li><a href="/api/list-group-members.html" class="">List Group Members</a></li><li><a href="/api/list-groups.html" class="">List Groups</a></li><li><a href="/api/list-recordset-changes.html" class="">List RecordSet Changes</a></li><li><a href="/api/list-recordsets-by-zone.html" class="">List / Search RecordSets</a></li><li><a href="/api/list-recordsets-global.html" class="">Global List / Search RecordSets</a></li><li><a href="/api/list-zone-changes.html" class="">List Zone Changes</a></li><li><a href="/api/list-zones.html" class="">List / Search Zones</a></li><li><a href="/api/membership-model.html" class="">Membership Model</a></li><li><a href="/api/recordset-model.html" class="">RecordSet Model</a></li><li><a href="/api/reject-batchchange.html" class="">Reject Batch Change</a></li><li><a href="/api/sync-zone.html" class="">Sync Zone</a></li><li><a href="/api/update-group.html" class="">Update Group</a></li><li><a href="/api/update-recordset.html" class="">Update RecordSet</a></li><li><a href="/api/update-zone.html" class="">Update Zone</a></li><li><a href="/api/zone-model.html" class="">Zone Model</a></li></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/VinylDNS/vinyldns" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/VinylDNS/vinyldns" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="VinylDNS" data-github-repo="vinyldns"><div class="content-wrapper"><section><h1 id="create-batch-change">Create Batch Change</h1>

<p>Creates a batch change with <a href="batchchange-model.html#singleaddchange-attributes">SingleAddChanges</a> and/or <a href="batchchange-model.html#singledeleterrsetchange-attributes">SingleDeleteRRSetChanges</a> across different zones.  A delete and add of the same record will be treated as an update on that record set. Regardless of the input order in the batch change, all deletes for the same recordset will be logically applied before the adds.</p>

<p>Current supported record types for creating a batch change are: <strong>A</strong>, <strong>AAAA</strong>, <strong>CNAME</strong>, <strong>MX</strong>, <strong>PTR</strong>, <strong>TXT</strong>. A batch must contain at least one change and no more than 20 changes.
Supported record types for records in shared zones may vary. Contact your VinylDNS administrators to find the allowed record types.
This does not apply to zone administrators or users with specific ACL access rules.</p>

<h4 id="http-request">HTTP REQUEST</h4>

<blockquote>
  <p>POST /zones/batchrecordchanges?allowManualReview={true | false}</p>
</blockquote>

<p>Note that the batch change request inputs are a subset of the full <a href="batchchange-model.html#batchchange-attributes">batch change model</a>.</p>

<h4 id="http-request-params">HTTP REQUEST PARAMS</h4>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th style="text-align: left">type</th>
      <th>required?</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>comments</td>
      <td style="text-align: left">string</td>
      <td>no</td>
      <td style="text-align: left">Optional comments about the batch change.</td>
    </tr>
    <tr>
      <td>changes</td>
      <td style="text-align: left">Array of ChangeInput</td>
      <td>yes</td>
      <td style="text-align: left">Set of <em>ChangeInput</em>s in the batch change. A <em>ChangeInput</em>  is an <a href="#addchangeinput-attributes">AddChangeInput</a> or <a href="#deletechangeinput-attributes">DeleteChangeInput</a>. Type is inferred from specified <em>changeType</em>.</td>
    </tr>
    <tr>
      <td>ownerGroupId</td>
      <td style="text-align: left">string</td>
      <td>sometimes</td>
      <td style="text-align: left">Record ownership assignment. Required if any records in the batch change are in <a href="zone-model.html#shared-zones">shared zones</a> and are new or unowned.</td>
    </tr>
    <tr>
      <td>scheduledTime</td>
      <td style="text-align: left">date-time</td>
      <td>no</td>
      <td style="text-align: left">Optional datetime. Stored as UTC. Batch change will not be processed until after the scheduled time. Required format is an ISO 8601 date time string.</td>
    </tr>
    <tr>
      <td>allowManualReview</td>
      <td style="text-align: left">boolean</td>
      <td>no</td>
      <td style="text-align: left">Optional override to control whether manual review is enabled for the batch change request. Default value is <code class="highlighter-rouge">true</code>. Must be passed in as a query parameter, not in the request body.</td>
    </tr>
  </tbody>
</table>

<h5 id="addchangeinput-">AddChangeInput <a id="addchangeinput-attributes"></a></h5>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th style="text-align: left">type</th>
      <th>required?</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>changeType</td>
      <td style="text-align: left">ChangeInputType</td>
      <td>yes</td>
      <td style="text-align: left">Type of change input. Must be set to <strong>Add</strong> for <em>AddChangeInput</em>.</td>
    </tr>
    <tr>
      <td>inputName</td>
      <td style="text-align: left">string</td>
      <td>yes</td>
      <td style="text-align: left">The fully qualified domain name of the record being added. For <strong>PTR</strong>, the input name is a valid IPv4 or IPv6 address.</td>
    </tr>
    <tr>
      <td>type</td>
      <td style="text-align: left">RecordType</td>
      <td>yes</td>
      <td style="text-align: left">Type of DNS record. Supported records for batch changes are currently: <strong>A</strong>, <strong>AAAA</strong>, <strong>CNAME</strong>, and <strong>PTR</strong>.</td>
    </tr>
    <tr>
      <td>ttl</td>
      <td style="text-align: left">long</td>
      <td>no</td>
      <td style="text-align: left">The time-to-live in seconds. The minimum and maximum values are 30 and 2147483647, respectively. If excluded, this will be set to the system default for new adds, or the existing TTL for updates</td>
    </tr>
    <tr>
      <td>record</td>
      <td style="text-align: left"><a href="recordset-model.html#record-data">RecordData</a></td>
      <td>yes</td>
      <td style="text-align: left">The data for the record.</td>
    </tr>
  </tbody>
</table>

<h5 id="deletechangeinput-">DeleteChangeInput <a id="deletechangeinput-attributes"></a></h5>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th style="text-align: left">type</th>
      <th>required?</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>changeType</td>
      <td style="text-align: left">ChangeInputType</td>
      <td>yes</td>
      <td style="text-align: left">Type of change input. Must be <strong>DeleteRecordSet</strong> for <em>DeleteChangeInput</em>.</td>
    </tr>
    <tr>
      <td>inputName</td>
      <td style="text-align: left">string</td>
      <td>yes</td>
      <td style="text-align: left">The fully qualified domain name of the record being deleted.</td>
    </tr>
    <tr>
      <td>type</td>
      <td style="text-align: left">RecordType</td>
      <td>yes</td>
      <td style="text-align: left">Type of DNS record. Supported records for batch changes are currently: <strong>A</strong>, <strong>AAAA</strong>, <strong>CNAME</strong>, and <strong>PTR</strong>.</td>
    </tr>
    <tr>
      <td>record</td>
      <td style="text-align: left"><a href="recordset-model.html#record-data">RecordData</a></td>
      <td>no</td>
      <td style="text-align: left">The data for the record. If specified, only this DNS entry for the existing DNS recordset will be deleted; if unspecified, the entire DNS recordset will be deleted.</td>
    </tr>
  </tbody>
</table>

<h4 id="example-http-request">EXAMPLE HTTP REQUEST</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "comments": "this is optional",
    "ownerGroupId": "f42385e4-5675-38c0-b42f-64105e743bfe",
    "changes": [
        {
            "inputName": "example.com.",
            "changeType": "Add",
            "type": "A",  
            "ttl": 3600, 
            "record": {
                "address": "1.1.1.1"
            } 
        }, 
        {
            "inputName": "192.0.2.195",
            "changeType": "Add",
            "type": "PTR", 
            "ttl": 3600,
            "record": {
                "ptrdname": "ptrdata.data."
            }
        }, 
        {
            "inputName": "cname.example.com.",
            "changeType": "DeleteRecordSet",
            "type": "CNAME"
        }, 
        {
            "inputName": "update.another.example.com.",
            "changeType": "DeleteRecordSet",
            "type": "AAAA",
            "record": {
              "address": "2:3:4:5:6:7:8:9" 
            }
        }, 
        {
            "inputName": "update.another.example.com.",
            "changeType": "Add",
            "type": "AAAA", 
            "ttl": 4000,
            "record": {
                "address": "1:2:3:4:5:6:7:8"
            }
        }
    ]
}
</code></pre></div></div>

<p>The first two items in the changes list are SingleAddChanges of an <strong>A</strong> record and a <strong>PTR</strong> record. Note that for the <strong>PTR</strong> record, the <em>inputName</em> is a valid IP address. The third item is a delete of a <strong>CNAME</strong> record. The last two items represent an update (delete &amp; add) of an <strong>AAAA</strong> record with the fully qualified domain name “update.another.example.com.”.</p>

<h4 id="http-response-types">HTTP RESPONSE TYPES</h4>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>202</td>
      <td style="text-align: left"><strong>Accepted</strong> - The batch change is validated and is returned in the response body. Based on <code class="highlighter-rouge">status</code>, the batch will either be sent for immediate backend processing (<code class="highlighter-rouge">PendingProcessing</code>) or pending manual review (<code class="highlighter-rouge">PendingReview</code>).</td>
    </tr>
    <tr>
      <td>400</td>
      <td style="text-align: left"><strong>Bad Request</strong> - Error in the batch change. See <a href="batchchange-errors.html">Batch Change Errors</a> page.</td>
    </tr>
    <tr>
      <td>403</td>
      <td style="text-align: left"><strong>Forbidden</strong> - The user does not have the access required to perform the action.</td>
    </tr>
    <tr>
      <td>413</td>
      <td style="text-align: left"><strong>Request Entity Too Large</strong> - Cannot request more than <limit> changes in a single batch change request.</limit></td>
    </tr>
    <tr>
      <td>422</td>
      <td style="text-align: left"><strong>Unprocessable Entity</strong> - the batch does not contain any changes, thus cannot be processed.</td>
    </tr>
  </tbody>
</table>

<p>A batch change goes through numerous validations before it is processed. This results in corresponding BadRequest or error responses. View the full list of batch change errors <a href="batchchange-errors.html">here</a>.</p>

<h4 id="http-response-attributes">HTTP RESPONSE ATTRIBUTES</h4>

<p>On success, the response from create batch change includes the fields the user input, as well as some additional information provided by the system. This response is the same as that of <a href="get-batchchange.html#http-response-attributes">get batch change</a>.</p>

<h4 id="example-response">EXAMPLE RESPONSE</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "userId": "vinyl", 
    "userName": "vinyl201", 
    "comments": "this is optional", 
    "createdTimestamp": "2018-05-09T14:19:34Z",
    "ownerGroupId": "f42385e4-5675-38c0-b42f-64105e743bfe" 
    "changes": [
        {
            "changeType": "Add",
            "inputName": "example.com.", 
            "type": "A", 
            "ttl": 3600, 
            "record": {
                "address": "1.1.1.1"
            }, 
            "status": "Pending", 
            "recordName": "example.com.", 
            "zoneName": "example.com.", 
            "zoneId": "74e93bfc-7296-4b86-83d3-1ffcb0eb3d13",
            "validationErrors": [],
            "id": "7573ca11-3e30-45a8-9ba5-791f7d6ae7a7"
        }, 
        {
            "changeType": "Add",
            "inputName": "192.0.2.195", 
            "type": "PTR", 
            "ttl": 3600, 
            "record": {
                "ptrdname": "ptrdata.data."
            }, 
            "status": "Pending", 
            "recordName": "195", 
            "zoneName": "2.0.192.in-addr.arpa.", 
            "zoneId": "7fd52634-5a0c-11e8-9c2d-fa7ae01bbebc",
            "validationErrors": [],
            "id": "bece5338-5a0c-11e8-9c2d-fa7ae01bbebc"
        }, 
        {
            "changeType": "DeleteRecordSet", 
            "inputName": "cname.example.com.", 
            "type": "CNAME", 
            "status": "Pending",
            "recordName": "cname", 
            "zoneName": "example.com.", 
            "zoneId": "74e93bfc-7296-4b86-83d3-1ffcb0eb3d13",
            "validationErrors": [],
            "id": "02048500-5a0d-11e8-a10f-fa7ae01bbebc" 
        }, 
        {
            "changeType": "DeleteRecordSet",
            "inputName": "update.example.com.", 
            "type": "AAAA", 
            "status": "Pending",
            "recordName": "update", 
            "zoneName": "example.com.", 
            "zoneId": "74e93bfc-7296-4b86-83d3-1ffcb0eb3d13",
            "validationErrors": [],
            "id": "1cee1c78-5a0d-11e8-9c2d-fa7ae01bbebc" 
        }, 
        {
            "changeType": "Add",
            "inputName": "update.another.example.com.", 
            "type": "AAAA", 
            "ttl": 3600, 
            "record": {
                "address": "1:2:3:4:5:6:7:8"
            }, 
            "status": "Pending", 
            "recordName": "update", 
            "zoneName": "another.example.com.", 
            "zoneId": "7fd52634-5a0c-11e8-9c2d-fa7ae01bbebc",
            "validationErrors": [],
            "id": "43dd1226-5a0d-11e8-9c2d-fa7ae01bbebc"
        }
    ], 
    "status": "PendingProcessing", 
    "id": "02bd95f4-a32c-443b-82eb-54dbaa55b31a"
}
</code></pre></div></div>
</section><div class="edit-button"><a href="https://github.com/VinylDNS/vinyldns/edit/master/modules/docs/src/main/mdoc/api/create-batchchange.md" target="_blank" rel="noopener noreferrer" class="btn-sm btn-info">Improve this page</a></div></div></div></div></div><script src="/highlight/highlight.pack.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'vinyldns/Lobby'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/js/docs.js"></script></body></html>