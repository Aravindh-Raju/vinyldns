<html><head><title>VinylDNS: Zone Model</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="VinylDNS" /><meta name="description" content="DNS Management Platform" /><meta name="og:image" content="/img/poster.png" /><meta name="og:title" content="VinylDNS: Zone Model" /><meta name="og:site_name" content="VinylDNS" /><meta name="og:url" content="http://vinyldns.io" /><meta name="og:type" content="website" /><meta name="og:description" content="DNS Management Platform" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="VinylDNS: Zone Model" /><meta name="twitter:image" content="http://vinyldns.ioimg/poster.png" /><meta name="twitter:description" content="DNS Management Platform" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/default.css" /><link rel="stylesheet" href="/css/style.css" /><link rel="stylesheet" href="/css/palette.css" /><link rel="stylesheet" href="/css/codemirror.css" /><link rel="stylesheet" href="/css/custom.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"><span>VinylDNS</span></div></a></li>           <li><a href="/api/index" class="">API documentation</a></li> <li><a href="/api/auth-mechanism.html" class="">Authentication</a></li> <li><a href="/api/zone-model.html" class="">Zone</a> <ul class="sub_section"> <li><a href="/api/zone-model.html" class=" active ">Zone Model</a></li> <li><a href="/api/create-zone.html" class="">Create Zone</a></li> <li><a href="/api/update-zone.html" class="">Update Zone</a></li> <li><a href="/api/delete-zone.html" class="">Delete Zone</a></li> <li><a href="/api/get-zone.html" class="">Get Zone</a></li> <li><a href="/api/list-zones.html" class="">List / Search Zone</a></li> <li><a href="/api/sync-zone.html" class="">Sync Zone</a></li> <li><a href="/api/list-zone-changes.html" class="">List Zone Changes</a></li></ul></li> <li><a href="/api/recordset-model.html" class="">RecordSet</a> <ul class="sub_section"> <li><a href="/api/recordset-model.html" class="">RecordSet Model</a></li> <li><a href="/api/create-recordset.html" class="">Create RecordSet</a></li> <li><a href="/api/update-recordset.html" class="">Update RecordSet</a></li> <li><a href="/api/delete-recordset.html" class="">Delete RecordSet</a></li> <li><a href="/api/get-recordset.html" class="">Get RecordSet</a></li> <li><a href="/api/list-recordsets.html" class="">List / Search RecordSets</a></li> <li><a href="/api/get-recordset-change.html" class="">Get RecordSet Change</a></li> <li><a href="/api/list-recordset-changes.html" class="">List RecordSet Changes</a></li></ul></li> <li><a href="/api/batchchange-model.html" class="">Batch Change</a> <ul class="sub_section"> <li><a href="/api/batchchange-model.html" class="">Batch Change Model</a></li> <li><a href="/api/create-batchchange.html" class="">Create Batch Change</a></li> <li><a href="/api/get-batchchange.html" class="">Get Batch Change</a></li> <li><a href="/api/list-batchchanges.html" class="">List Batch Changes</a></li> <li><a href="/api/batchchange-errors.html" class="">Batch Change Errors</a></li></ul></li> <li><a href="/api/membership-model.html" class="">Membership</a> <ul class="sub_section"> <li><a href="/api/membership-model.html" class="">Membership Model</a></li> <li><a href="/api/create-group.html" class="">Create Group</a></li> <li><a href="/api/update-group.html" class="">Update Group</a></li> <li><a href="/api/delete-group.html" class="">Delete Group</a></li> <li><a href="/api/get-group.html" class="">Get Group</a></li> <li><a href="/api/list-groups.html" class="">List Groups</a></li> <li><a href="/api/list-group-admins.html" class="">List Group Admins</a></li> <li><a href="/api/list-group-members.html" class="">List Group Members</a></li> <li><a href="/api/list-group-activity.html" class="">List Group Activity</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/VinylDNS/vinyldns"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/VinylDNS/vinyldns"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="VinylDNS" data-github-repo="vinyldns"><div class="content-wrapper"><section><h1 id="zone-model">Zone Model</h1>

<h4 id="table-of-contents">Table of Contents</h4>

<ul>
  <li><a href="#zone-attributes">Zone Attributes</a></li>
  <li><a href="#zone-example">Zone JSON Example</a></li>
  <li><a href="#zone-conn-attr">Zone Connection Attributes</a></li>
  <li><a href="#zone-conn-example">Zone Connection JSON Example</a></li>
  <li><a href="#zone-acl-rule-attr">Zone ACL Rule Attributes</a></li>
  <li><a href="#zone-acl-rule-example">Zone ACL Rule Examples</a></li>
  <li><a href="#ptr-acl-rule">PTR ACL Rule</a></li>
  <li><a href="#ptr-acl-rule-example">PTR ACL Rule Examples</a></li>
</ul>

<h4 id="zone-attributes-">ZONE ATTRIBUTES <a id="zone-attributes"></a></h4>

<table>
  <thead>
    <tr>
      <th>field</th>
      <th style="text-align: left">type</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>status</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left"><em>Active</em> - the zone is connected and ready for use; <em>Syncing</em> - the zone is currently syncing with the DNS backend and is not available until syncing is complete.</td>
    </tr>
    <tr>
      <td>updated</td>
      <td style="text-align: left">date-time</td>
      <td style="text-align: left">The last time the zone was changed.  Note: this does not include changes to record sets, only the zone entity itself</td>
    </tr>
    <tr>
      <td>name</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The name of the zone</td>
    </tr>
    <tr>
      <td>adminGroupId</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The id of the administrators group for the zone</td>
    </tr>
    <tr>
      <td>created</td>
      <td style="text-align: left">date-time</td>
      <td style="text-align: left">The time when the zone was first created</td>
    </tr>
    <tr>
      <td>account</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left"><strong>DEPRECATED</strong> The account that created the zone</td>
    </tr>
    <tr>
      <td>email</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The distribution email for the zone</td>
    </tr>
    <tr>
      <td>connection</td>
      <td style="text-align: left">ZoneConnection</td>
      <td style="text-align: left">The connection used to issue DDNS updates to the backend zone.  If not provided, default keys will be used.  See the <a href="#zone-conn-attr">Zone Connection Attributes</a> for more information</td>
    </tr>
    <tr>
      <td>transferConnection</td>
      <td style="text-align: left">ZoneConnection</td>
      <td style="text-align: left">The connection that is used to sync the zone with the DNS backend.  This can be different than the update connection.  If not provided, default keys will be used</td>
    </tr>
    <tr>
      <td>shared</td>
      <td style="text-align: left">boolean</td>
      <td style="text-align: left"><strong>DEPRECATED</strong> An indicator that the zone is shared with anyone.  No longer used as ACLs are now used to manage zones.</td>
    </tr>
    <tr>
      <td>acl</td>
      <td style="text-align: left">ZoneACL</td>
      <td style="text-align: left">The access control rules governing the zone.  See the <a href="#zone-acl-rule-attr">Zone ACL Rule Attributes</a> for more information</td>
    </tr>
    <tr>
      <td>id</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The unique identifier for this zone</td>
    </tr>
  </tbody>
</table>

<h4 id="zone-example-">ZONE EXAMPLE <a id="zone-example"></a></h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Active"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-16T15:27:28Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adminGroupId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92b298e8-97db-4f1b-881b-fd08ca0dd311"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-16T15:27:26Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92b298e8-97db-4f1b-881b-fd08ca0dd311"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"connection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"primaryServer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:5301"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"keyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vinyl."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OBF:1:W1FXgpOjjrQAABAARrZmyLjFSOuFYTAw81mhvNEmNAc4RnYzPjJQMEjVQWWLRohu7gRAVw=="</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"transferConnection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"primaryServer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:5301"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"keyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vinyl."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OBF:1:W1FXgpOjjrQAABAARrZmyLjFSOuFYTAw81mhvNEmNAc4RnYzPjJQMEjVQWWLRohu7gRAVw=="</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"shared"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"acl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Write"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some_test_rule"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"recordMask"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Write"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some_test_rule"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"recordMask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.*"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"groupId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some_test_rule"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9cbdd3ac-9752-4d56-9ca0-6a1a14fc5562"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="zone-connection-attributes-">ZONE CONNECTION ATTRIBUTES <a id="zone-conn-attr"></a></h4>
<p>Zone Connection specifies the connection information to the backend DNS server.</p>

<table>
  <thead>
    <tr>
      <th>field</th>
      <th style="text-align: left">type</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>primaryServer</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The ip address or host that is connected to.  This can take a port as well <code class="highlighter-rouge">127.0.0.1:5300</code>.  If no port is specified, 53 will be assumed.</td>
    </tr>
    <tr>
      <td>keyName</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The name of the DNS key that has access to the DNS server and zone.  <strong>Note:</strong> For the transfer connection, the key must be given <em>allow-transfer</em> access to the zone.  For the primary connection, the key must be given <em>allow-update</em> access to the zone.</td>
    </tr>
    <tr>
      <td>name</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">A user identifier for the connection.</td>
    </tr>
    <tr>
      <td>key</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">The TSIG secret key used to sign requests when communicating with the primary server.  <strong>Note:</strong> After creating the zone, the key value itself is hashed and obfuscated, so it will be unusable from a client perspective.</td>
    </tr>
  </tbody>
</table>

<h4 id="zone-connection-example-">ZONE CONNECTION EXAMPLE <a id="zone-conn-example"></a></h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"primaryServer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:5301"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"keyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vinyl."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OBF:1:W1FXgpOjjrQAABAARrZmyLjFSOuFYTAw81mhvNEmNAc4RnYzPjJQMEjVQWWLRohu7gRAVw=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="zone-acl-rule-attributes-">ZONE ACL RULE ATTRIBUTES <a id="zone-acl-rule-attr"></a></h4>
<p>ACL Rules are used to govern user and group access to record operations on a zone.  ACL Rules can be associated with a specific user, or all users in a specified group.  If neither a user <em>or</em> a group is attached to an ACL rule, then the rule applies to <em>all</em> users in the system.
<br /><br />
Use the <a href="../api/update-zone">Zone Update</a> endpoint to update the <strong>acl</strong> attribute of the zone</p>

<blockquote>
  <p><strong>Important!</strong> If a user is mentioned on an ACL Rule directly, or is a member of a group that is mentioned on an ACL Rule, that user will be able to see the zone.</p>
</blockquote>

<blockquote>
  <p>Rules made without selecting a group or user will apply to all users in VinylDNS.</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>field</th>
      <th style="text-align: left">type</th>
      <th style="text-align: left">description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>recordMask</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">(optional) A regular expression that is used to match against <em>record names</em>.  If left empty, then <em>all</em> records will be matched for the rule.  All records matching the match will be governed by this rule.</td>
    </tr>
    <tr>
      <td>recordTypes</td>
      <td style="text-align: left">Array[String]</td>
      <td style="text-align: left">An array of all record types that this rule applies to.  If left empty, then all record types will be governed by this rule.</td>
    </tr>
    <tr>
      <td>accessLevel</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left"><strong>NoAccess</strong> - cannot see the data for the record; <strong>Read</strong> - can read only the record; <strong>Write</strong> - the user can create and edit records, but cannot delete them; <strong>Delete</strong> - the user can read, create, update, and delete records</td>
    </tr>
    <tr>
      <td>userId</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">(optional) The unique identifier for the user the rule applies to.  <em>Note: this is not the name of the user, but their uuid in VinylDNS</em></td>
    </tr>
    <tr>
      <td>groupId</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">(optional) The unique identifier for the group the rule applies to.  <em>Note: you cannot set both the userId and groupId, only one</em></td>
    </tr>
    <tr>
      <td>description</td>
      <td style="text-align: left">string</td>
      <td style="text-align: left">(optional) A user entered description for the rule</td>
    </tr>
  </tbody>
</table>

<p>The priority of ACL Rules in descending precedence: <br /></p>
<ol>
  <li>Individual rules placed on a user <br /></li>
  <li>Rules placed on groups that a user is in <br /></li>
  <li>Rules placed on all users in VinylDNS</li>
</ol>

<blockquote>
  <p><em>Note: Being in the admin group of a zone will grant users full access regardless of ACL Rules</em></p>
</blockquote>

<p>For conflicting rules, the rule that is more specific will take precedence. For example, if the account <em>jdoe201</em> was given Read access to all records in a zone
through the rule:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read"</span><span class="p">,</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>
</div>

<p>and then Write access to only A records through the rule:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Write"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>and then Delete access to only A records that matched the expression *dev* through the rule:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"recordMask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*dev*"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>then the rule with the recordMask will take precedence and give Delete access to matched A RecordSets, the rule with recordTypes will
take precedence and give Write access to all other A records, and the more broad rule will give Read access to all other record types in the zone</p>

<h4 id="zone-acl-rule-examples-">ZONE ACL RULE EXAMPLES <a id="zone-acl-rule-example"></a></h4>
<p><strong>Grant read/write/delete access to www.* records of type A, AAAA, CNAME to one user</strong>
Under this rule, the user specified will be able to view, create, edit, and delete records in the zone that match the expression <code class="highlighter-rouge">www.*</code> and are of type A, AAAA, or CNAME.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"recordMask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.*"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A"</span><span class="p">,</span><span class="w"> </span><span class="s2">"AAAA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"CNAME"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><strong>Grant read only access to all VinylDNS users to A, AAAA, CNAME records</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A"</span><span class="p">,</span><span class="w"> </span><span class="s2">"AAAA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"CNAME"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><strong>Grant read/write/delete access to records of type A, AAAA, CNAME to one group</strong>*</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"accessLevel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"groupId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uuid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"recordTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"A"</span><span class="p">,</span><span class="w"> </span><span class="s2">"AAAA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"CNAME"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="ptr-acl-rules-with-cidr-masks-">PTR ACL RULES WITH CIDR MASKS <a id="ptr-acl-rule"></a></h3>
<p>Acl rules can be applied to specific record types and can include record masks to further narrow down which records they
apply to. These record masks apply to record names, but because PTR record names are part their reverse zone ip, the use of regular
expressions for record masks are not supported.
<br /><br />
Instead PTR record masks must be CIDR rules, which will denote a range of ip addresses that the rule will apply to.
While more information and useful CIDR rule utility tools can be found online, CIDR rules describe how many bits of an ip address’ binary representation
must be the same for a match.</p>

<h3 id="ptr-acl-rules-with-cidr-masks-example-">PTR ACL RULES WITH CIDR MASKS EXAMPLE <a id="ptr-acl-rule-example"></a></h3>
<p>The ACL Rule</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="err">recordTypes:</span><span class="w"> </span><span class="err">[</span><span class="nt">"PTR"</span><span class="err">],</span><span class="w">
    </span><span class="err">accessLevel</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Will give Read permissions to PTR Record Sets to all users in VinylDNS
<br /><br />
The <strong>IPv4</strong> ACL Rule</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="err">recordTypes:</span><span class="w"> </span><span class="err">[</span><span class="nt">"PTR"</span><span class="err">],</span><span class="w">
    </span><span class="err">accessLevel</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read"</span><span class="p">,</span><span class="w">
    </span><span class="err">recordMask</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.100.100.100/16"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Will give Read permissions to PTR Record Sets 100.100.000.000 to 100.100.255.255, as 16 bits is half of an IPv4 address
<br /><br />
The <strong>IPv6</strong> ACL Rule</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="err">recordTypes:</span><span class="w"> </span><span class="err">[</span><span class="nt">"PTR"</span><span class="err">],</span><span class="w">
    </span><span class="err">accessLevel</span><span class="p">:</span><span class="w"> </span><span class="s2">"Read"</span><span class="p">,</span><span class="w">
    </span><span class="err">recordMask</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000:1000:1000:1000:1000:1000:1000:1000/64"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Will give Read permissions to PTR Record Sets 1000:1000:1000:1000:0000:0000:0000:0000 to 1000:1000:1000:1000:FFFF:FFFF:FFFF:FFFF, as 64 bits is half of an IPv6 address
<br /><br /></p>
</section><div class="edit-button"><a href="https://github.com/VinylDNS/vinyldns/edit/master/modules/docs/src/main/tut/api/zone-model.md" class="btn-sm btn-info">Improve this page</a></div></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script>((window.gitter = {}).chat = {}).options = {
room: 'vinyldns/Lobby'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/js/main.js"></script></body></html>