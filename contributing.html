<html><head><title>VinylDNS: Contributing</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="VinylDNS" /><meta name="description" content="DNS Management Platform" /><meta name="og:image" content="/img/poster.png" /><meta name="og:title" content="VinylDNS: Contributing" /><meta name="og:site_name" content="VinylDNS" /><meta name="og:url" content="http://vinyldns.io" /><meta name="og:type" content="website" /><meta name="og:description" content="DNS Management Platform" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="VinylDNS: Contributing" /><meta name="twitter:image" content="http://vinyldns.ioimg/poster.png" /><meta name="twitter:description" content="DNS Management Platform" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/default.css" /><link rel="stylesheet" href="/css/style.css" /><link rel="stylesheet" href="/css/palette.css" /><link rel="stylesheet" href="/css/codemirror.css" /><link rel="stylesheet" href="/css/custom.css" /></head><body><header id="site-header"><div class="navbar-wrapper navbar-inverse"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="brand"><div class="icon-wrapper"><span>VinylDNS</span></div></a></div><nav class="text-right"><ul class=""><li><a href="https://github.com/VinylDNS/vinyldns"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li><li><a href="/api"><i class="fa fa-file-text"></i><span class="hidden-xs">API Documentation</span></a></li></ul></nav></div></div><div class="jumbotron" style="background-image:url('/img/jumbotron_pattern.png')"></div><div><ul class="horizontalNav">                                                                                                             <li><a class="" href="/">Home</a></li>  <li><a class="" href="/portal/">Portal Guide</a></li>  <li><a class="" href="/operator/">Operator Guide</a></li>  <li><a class=" active " href="/contributing.html">Contributing</a></li>  <li><a class="" href="/tools.html">Tools</a></li>  <li><a class="" href="/faq.html">FAQ</a></li>  <li><a class="" href="/getting-help.html">Getting Help</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><h1 id="contributing-to-vinyldns">Contributing to VinylDNS</h1>
<p>The following are a set of guidelines for contributing to VinylDNS and its associated repositories.</p>

<h2 id="table-of-contents">Table of Contents</h2>
<ul>
  <li><a href="#code-of-conduct">Code of Conduct</a></li>
  <li><a href="#issues">Issues</a></li>
  <li><a href="#making-contributions">Making Contributions</a></li>
  <li><a href="#style-guides">Style Guides</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#license-header-check">License Header Check</a></li>
  <li><a href="#release-management">Release Management</a></li>
</ul>

<h2 id="code-of-conduct">Code of Conduct</h2>
<p>This project and everyone participating in it are governed by the <a href="CODE_OF_CONDUCT.md">VinylDNS Code Of Conduct</a>.  By
participating, you agree to this Code.  Please report any violations to the code of conduct to vinyldns-core@googlegroups.com.</p>

<h2 id="issues">Issues</h2>
<p>If you would like to contribute to VinylDNS, you can look through <code class="highlighter-rouge">beginner</code> and <code class="highlighter-rouge">help-wanted</code> issues.  We keep a list
of these issues around to encourage participation in building the platform.  In the issue list, you can chose “Labels” and
choose a specific label to narrow down the issues to review.</p>

<ul>
  <li><strong>Beginner issues</strong>: only require a few lines of code to complete, rather isolated to one or two files.  A good way
to get through changing and testing your code, and meet everyone!</li>
  <li><strong>Help wanted issues</strong>: these are more involved than beginner issues, are items that tend to come near the top of our backlog but not necessarily in the current development stream.</li>
</ul>

<p>Besides those issues, you can sort the issue list by number of comments to find one that maybe of interest.  You do
<em>not</em> have to limit yourself to <em>only</em> “beginner” or “help-wanted” issues.</p>

<p>Before choosing an issue, see if anyone is assigned or has indicated they are working on it (either in comment or via PR).
You can work on the issue by reviewing the PR or asking where they are at; otherwise, it doesn’t make sense to duplicate
work that is already in-progress.</p>

<h2 id="making-contributions">Making Contributions</h2>
<h3 id="submitting-a-code-contribution">Submitting a Code Contribution</h3>
<p>We follow the standard <em>GitHub Flow</em> for taking code contributions.  The following is the process typically followed:</p>

<ol>
  <li>Create a fork of the repository that you want to contribute code to</li>
  <li>Clone your forked repository to your local machine</li>
  <li>In your local machine, add a remote to the “main” repository, we call this “upstream” by running <code class="highlighter-rouge">git remote add upstream https://github.com/vinyldns/vinyldns.git</code>.  Note: you can also use <code class="highlighter-rouge">ssh</code> instead of <code class="highlighter-rouge">https</code></li>
  <li>Create a local branch for your work <code class="highlighter-rouge">git checkout -b your-user-name/user-branch-name</code>.  Add whatever your GitHub
user name is before whatever you want your branch to be.</li>
  <li>Begin working on your local branch</li>
  <li>Make sure you run all builds before posting a PR!  It’s faster to run everything locally rather than waiting for
the build server to complete its job.  See <a href="DEVELOPER_GUIDE.md">DEVELOPER_GUIDE.md</a> for information on local development</li>
  <li>When you are ready to contribute your code, run <code class="highlighter-rouge">git push origin your-user-name/user-branch-name</code> to push your changes
to your <em>own fork</em>.</li>
  <li>Go to the <a href="https://github.com/vinyldns/vinyldns.git">VinylDNS main repository</a> (or whatever repo you are contributing to)
and you will see your change waiting and a link to “Create a PR”.  Click the link to create a PR.</li>
  <li>You will receive comments on your PR.  Use the PR as a dialog on your changes.</li>
</ol>

<h3 id="commit-messages">Commit Messages</h3>
<ul>
  <li>Limit the first line to 72 characters or fewer.</li>
  <li>Use the present tense (“Add validation” not “Added validation”).</li>
  <li>Use the imperative mood (“Move database call” not “Moves database call”).</li>
  <li>Reference issues and other pull requests liberally after the first line.  Use <a href="https://help.github.com/articles/autolinked-references-and-urls/">GitHub Auto Linking</a>
to link your PR to other issues.  <em>Note: This is essential, otherwise we may not know what issue a PR is created for</em></li>
  <li>Use markdown syntax as much as you want</li>
</ul>

<h3 id="modifying-your-pull-requests">Modifying your Pull Requests</h3>
<p>Often times, you will need to make revisions to your PRs that you submit.  This is part of the standard process of code
review.  There are different ways that you can make revisions, but the following process is pretty standard.</p>

<ol>
  <li>Sync with upstream first.  <code class="highlighter-rouge">git checkout master &amp;&amp; git fetch upstream &amp;&amp; git rebase upstream master &amp;&amp; git push origin master</code></li>
  <li>Checkout your branch on your local <code class="highlighter-rouge">git checkout your-user-name/user-branch-name</code></li>
  <li>Sync your branch with latest <code class="highlighter-rouge">git rebase master</code>.  Note: If you have merge conflicts, you will have to resolve them</li>
  <li>Revise your PR, making changes recommended in the comments / code review</li>
  <li>When all tests pass, <code class="highlighter-rouge">git push origin your-user-name/user-branch-name</code> to revise your commit.  GitHub automatically
recognizes the update and will re-run verification on your PR!</li>
</ol>

<h3 id="contributor-license-agreement">Contributor License Agreement</h3>

<p>Before Comcast merges your code into the project you must sign the <a href="https://gist.github.com/ComcastOSS/a7b8933dd8e368535378cda25c92d19a">Comcast Contributor License Agreement (CLA)</a>.</p>

<p>If you haven’t previously signed a Comcast CLA, you’ll automatically be asked to when you open a pull request. Alternatively, we can send you a PDF that you can sign and scan back to us. Please create a new GitHub issue to request a PDF version of the CLA.</p>

<h3 id="merging-your-pull-request">Merging your Pull Request</h3>
<p>Once your PR is approved, one of the maintainers will merge your request for you.  If you are a maintainer, you can
merge your PR once you have the approval of at least 2 other maintainers.</p>

<h2 id="style-guides">Style Guides</h2>
<h3 id="python-style-guide">Python Style Guide</h3>
<ul>
  <li>Use snake case for everything except classes.  <code class="highlighter-rouge">this_is_snake_case</code>; <code class="highlighter-rouge">thisIsNotSnakeCaseDoNotDoThis</code></li>
</ul>

<h2 id="testing">Testing</h2>
<p>For specific steps to run the tests see the <a href="BUILDING.md#testing">Testing</a> section of the Building guide.</p>

<h3 id="python-for-testing">Python for Testing</h3>
<p>We use <a href="https://docs.pytest.org/en/latest/">pytest</a> for python tests.  It is helpful that you browse the documentation
so that you are familiar with pytest and how our functional tests operate.</p>

<p>We also use <a href="https://pyhamcrest.readthedocs.io/en/release-1.8/">PyHamcrest</a> for matchers in order to write easy
to read tests.  Please browse that documentation as well so that you are familiar with the different matchers
for PyHamcrest.  There aren’t a lot, so it should be quick.</p>

<p>Want to become a super star?  <a href="https://pyhamcrest.readthedocs.io/en/release-1.8/custom_matchers/">Write custom matchers!</a></p>

<h3 id="python-setup">Python Setup</h3>
<p>We use python for our functional tests exclusively in this project.  You can find all python code under the
<code class="highlighter-rouge">functional_test</code> directory.</p>

<p>In that directory are a few important files for you to be familiar with:</p>

<ul>
  <li>vinyl_client.py - this provides the interface to the VinylDNS api.  It handles signing the request for you, as well
as building and executing the requests, and giving you back valid responses.  For all new API endpoints, there should
be a corresponding function in the vinyl_client</li>
  <li>utils.py - provides general use functions that can be used anywhere in your tests.  Feel free to contribute new
functions here when you see repetition in the code</li>
</ul>

<p>Functional tests run on every build, and are designed to work <em>in every environment</em>.  That means locally, in docker,
and in production environments.</p>

<p>The functional tests that we run live in <code class="highlighter-rouge">functional_test/live_tests</code> directory.  In there, we have directories / modules
for different areas of the application.</p>

<ul>
  <li>membership - for managing groups and users</li>
  <li>recordsets - for managing record sets</li>
  <li>zones - for managing zones</li>
  <li>internal - for internal endpoints (not intended for public consumption)</li>
  <li>batch - for managing batch updates</li>
</ul>

<h3 id="functional-test-context">Functional Test Context</h3>
<p>Our func tests use pytest contexts.  There is a main test context that lives in <code class="highlighter-rouge">shared_zone_test_context.py</code>
that creates and tears down a shared test context used by many functional tests.  The
beauty of pytest is that it will ensure that the test context is stood up exactly once, then all individual tests
that use the context are called using that same context.</p>

<p>The shared test context sets up several things that can be reused:</p>

<ol>
  <li>An ok user and group</li>
  <li>A dummy user and group - a separate user and group helpful for tesing access controls and authorization</li>
  <li>An ok zone accessible only by the ok user and ok group</li>
  <li>A dummy zone accessible only by the dummy user and dummy group</li>
  <li>An IPv6 reverse zone</li>
  <li>A normal IPv4 reverse zone</li>
  <li>A classless IPv4 reverse zone</li>
  <li>A parent zone that has child zones - used for testing NS record management and zone delegations</li>
</ol>

<h3 id="really-important-test-context-rules">Really Important Test Context Rules!</h3>

<ol>
  <li>Try to use the <code class="highlighter-rouge">shared_zone_test_context</code> whenever possible!  This reduces the time
it takes to run functional tests (which is in minutes).</li>
  <li>Limit changes to users, groups, and zones in the shared test context, as doing so could impact downstream tests</li>
  <li>If you do modify any entities in the shared zone context, roll those back when your function completes!</li>
</ol>

<h2 id="license-header-check">License Header Check</h2>

<h3 id="api">API</h3>
<p>VinylDNS is configured with <a href="https://github.com/sbt/sbt-header">sbt-header</a>. All existing scala files have the appropriate
header. You can check for headers in <code class="highlighter-rouge">sbt</code> with:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">&gt; </span>;headerCheck;test:headerCheck;it:headerCheck
</code></pre>
</div>

<p>If you add a new file, you can add the appropriate header in <code class="highlighter-rouge">sbt</code> with:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">&gt; </span>;headerCreate;test:headerCreate;it:headerCreate
</code></pre>
</div>

<h3 id="portal">Portal</h3>
<blockquote>
  <p>You can check for headers in <code class="highlighter-rouge">sbt</code> with:</p>
  <div class="highlighter-rouge"><pre class="highlight"><code>project portal
;headerCheck;test:headerCheck;checkJsHeaders
</code></pre>
  </div>
</blockquote>

<blockquote>
  <p>You can create headers in <code class="highlighter-rouge">sbt</code> with:</p>
  <div class="highlighter-rouge"><pre class="highlight"><code>project portal
;headerCreate;test:headerCreate;createJsHeaders
</code></pre>
  </div>
</blockquote>

<h2 id="release-management">Release Management</h2>
<p>As an  overview, we release on a regular schedule roughly once per month.  At any time, you can see the following releases scheduled using Milestones in GitHub.</p>

<ul>
  <li>
    <current release=""> - for example, 0.9.8.  This constitutes the current work that is in-flight
</current>
  </li>
  <li>
    <next release=""> - for example, 0.9.9.  These are the issues pegged for the _next_ release to be worked on
</next>
  </li>
  <li>Backlog - These are the issues designated to be worked on in the not too distant future.</li>
</ul>

</div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>VinylDNS is designed and developed by <a href="" target="_blank">VinylDNS</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/VinylDNS/vinyldns"><span class="fa fa-github"></span>View on GitHub</a></p></div></div><div class="row"><div class="col-xs-6"><p>Website built with <a href="https://47deg.github.io/sbt-microsites/" target="_blank">Sbt-microsites</a> - © 2016 <a href="https://www.47deg.com/" target="_blank">47 Degrees</a></p></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'vinyldns/Lobby'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script></body></html>